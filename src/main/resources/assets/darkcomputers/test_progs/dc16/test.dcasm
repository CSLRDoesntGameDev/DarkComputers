.ORIGIN 0x0000
.CONST CHAR_MEM 0x7000
.CONST KEY_RET 0x7201
.CONST KEY_MOD 0x7202
.CONST KEY_PRB 0x7203
.CONST KEY_BUF_LEN 0x7204

.LABEL INIT
	LDV 0x00, 0x00, 0x00
	LDV 0x00, 0x00, 0x01

	STV CHAR_MEM, 0x00, 0xFF ; reset screen
	LDV CHAR_MEM, 0x00, 0x01

	LDV 0x40, 0x00, 0x0F

.LABEL WAIT_FOR_KEY
	LDR KEY_BUF_LEN, 0x00, 0x02
	CMP 0x02, 0x00, 0x03
	JGT READ_KEY

	JMP WAIT_FOR_KEY

.LABEL READ_KEY
	STV 0x00, 0x00, KEY_PRB
	LDR KEY_RET, 0x00, 0x05
	CMP 0x05, 0x0F, 0x12
	JGE PRINT_CHAR

	JMP WAIT_FOR_KEY


.LABEL PRINT_CHAR
	ADV 0x01, 0x01, 0x01
	CRR 0x12, 0xFF, 0x01

	JMP WAIT_FOR_KEY